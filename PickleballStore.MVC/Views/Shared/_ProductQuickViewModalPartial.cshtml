@model ProductViewModel

<div class="modal fade modalDemo popup-quickview" id="quick_view_@Model.Id">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="header">
                <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
            </div>
            <div class="wrap">
                <div class="tf-product-media-wrap">
                    <div dir="ltr" class="swiper tf-single-slide">
                        <div class="swiper-wrapper">
                            @foreach (var img in Model.Images)
                            {
                                <div class="swiper-slide">
                                    <div class="item">
                                        <img src="~/images/products/@img.ImageName" alt="@Model.Name">
                                    </div>
                                </div>
                            }
                        </div>
                        <div class="swiper-button-next button-style-arrow single-slide-prev"></div>
                        <div class="swiper-button-prev button-style-arrow single-slide-next"></div>
                    </div>
                </div>

                <div class="tf-product-info-wrap position-relative">
                    <div class="tf-product-info-list">
                        <div class="tf-product-info-title">
                            <h5>
                                <a class="link" href="@Url.Action("Details", "Product", new { id = Model.Id })">
                                    @Model.Name
                                </a>
                            </h5>
                        </div>

                        @if (Model.IsBestSeller || !string.IsNullOrEmpty(Model.BadgeLabel))
                        {
                            <div class="tf-product-info-badges">
                                @if (!string.IsNullOrEmpty(Model.BadgeLabel))
                                {
                                    <div class="badges text-uppercase @Model.BadgeCssClass">@Model.BadgeLabel</div>
                                }
                                @if (Model.IsBestSeller)
                                {
                                    <div class="badges text-uppercase">Best seller</div>
                                }
                                @if (Model.LiveInCarts > 0)
                                {
                                    <div class="product-status-content">
                                        <i class="icon-lightning"></i>
                                        <p class="fw-6">Selling fast! @Model.LiveInCarts people have this in their carts.</p>
                                    </div>
                                }
                            </div>
                        }

                        <div class="tf-product-info-price">
                            <div class="price">
                                @if (Model.PriceBeforeDiscount.HasValue && Model.PriceBeforeDiscount.Value > Model.Price)
                                {
                                    <span style="text-decoration: line-through; color: gray;">
                                        $@Model.PriceBeforeDiscount.Value.ToString("0.00", System.Globalization.CultureInfo.InvariantCulture)
                                    </span>
                                    <span style="color: red; font-weight: bold; margin-left: 5px;">
                                        $@Model.Price.ToString("0.00", System.Globalization.CultureInfo.InvariantCulture)
                                    </span>
                                }
                                else
                                {
                                    <span>$@Model.Price.ToString("0.00", System.Globalization.CultureInfo.InvariantCulture)</span>
                                }
                            </div>
                        </div>

                        <div class="tf-product-description">
                            <p>@Model.Description</p>
                        </div>

                        <input type="hidden" id="selectedVariantId-quickview-@Model.Id" value="@Model.Variants.FirstOrDefault()?.Id" />

                        @if (Model.Variants.Count > 0)
                        {
                            <div class="tf-product-info-variant-picker">
                                <div class="variant-picker-item">
                                    <div class="variant-picker-label">
                                        Color:
                                        <span class="fw-6 variant-picker-label-value">
                                            @Model.Variants.First().OptionValue
                                        </span>
                                    </div>
                                    <div class="variant-picker-values">
                                        @foreach (var variant in Model.Variants)
                                        {
                                            <input id="variant-quickview-@variant.Id-@Model.Id"
                                                   type="radio"
                                                   name="color-quickview-@Model.Id"
                                                   data-variant-id="@variant.Id"
                                                   @(Model.Variants.IndexOf(variant) == 0 ? "checked" : "")>
                                            <label class="hover-tooltip radius-60"
                                                   for="variant-quickview-@variant.Id-@Model.Id"
                                                   data-value="@variant.OptionValue"
                                                   data-variant-id="@variant.Id"
                                                   data-image="@variant.OptionImageName">
                                                <span class="btn-checkbox" style="background-color:@variant.ColorCode"></span>
                                                <span class="tooltip">@variant.OptionValue</span>
                                            </label>
                                        }
                                    </div>
                                </div>
                            </div>
                        }

                        <div class="tf-product-info-quantity">
                            <div class="quantity-title fw-6">Quantity</div>
                            <div class="wg-quantity">
                                <span class="btn-quantity minus-btn">-</span>
                                <input type="text" name="number" value="1">
                                <span class="btn-quantity plus-btn">+</span>
                            </div>
                        </div>

                        <div class="tf-product-info-buy-button">
                            <form>
                                <a onclick="addToBasket(document.getElementById('selectedVariantId-quickview-@Model.Id').value,parseInt(document.querySelector('#quick_view_@Model.Id .wg-quantity input[name=number]').value))"
                                   class="tf-btn btn-fill justify-content-center fw-6 fs-16 flex-grow-1 animate-hover-btn btn-add-to-cart">
                                    <span>Add to cart -&nbsp;</span>
                                    <span class="tf-qty-price">$@Model.Price.ToString("F2")</span>
                                </a>

                                <div class="tf-product-btn-wishlist btn-icon-action" data-product-id="@Model.Id">
                                    <i class="icon-heart" onclick="addToWishlist(@Model.Id, this); event.stopPropagation();"></i>
                                    <i class="icon-delete" onclick="removeFromWishlist(@Model.Id, this); event.stopPropagation();" style="display:none;"></i>
                                </div>

                                <a href="#compare"
                                   data-bs-toggle="offcanvas"
                                   aria-controls="offcanvasLeft"
                                   class="tf-product-btn-wishlist hover-tooltip box-icon bg_white compare btn-icon-action">
                                    <span class="icon icon-compare"></span>
                                    <span class="tooltip">Add to Compare</span>
                                    <span class="icon icon-check"></span>
                                </a>

                                <div class="w-100">
                                    <a href="#" class="btns-full">
                                        Buy with <img src="~/images/payments/paypal.png" alt="PayPal">
                                    </a>
                                    <a href="#" class="payment-more-option">More payment options</a>
                                </div>
                            </form>
                        </div>

                        <div>
                            <a href="@Url.Action("Details", "Product", new { id = Model.Id })"
                               class="tf-btn fw-6 btn-line">
                                View full details<i class="icon icon-arrow1-top-left"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>